{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/katvengo/prep-cado/App/Components/ImageInput.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport colors from \"../config/colors\";\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport * as ImagePicker from \"expo-image-picker\";\n\nfunction ImageInput(_ref) {\n  var imageUri = _ref.imageUri,\n      onChangeImage = _ref.onChangeImage;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  useEffect(function () {\n    requestPermission();\n  }, []);\n\n  var requestPermission = function requestPermission() {\n    var _await$ImagePicker$re, status;\n\n    return _regeneratorRuntime.async(function requestPermission$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(Platform.OS !== 'web')) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n          case 3:\n            _await$ImagePicker$re = _context.sent;\n            status = _await$ImagePicker$re.status;\n\n            if (status !== 'granted') {\n              alert(\"You need to enable permission to access the library.\");\n            }\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handlePress = function handlePress() {\n    var result;\n    return _regeneratorRuntime.async(function handlePress$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            } else if (result.cancelled) {\n              console.log(result.cancelled);\n            } else {\n              Alert.alert(\"Delete\", \"Are you sure you want to delete this image?\", [{\n                text: \"Yes\",\n                onPress: function onPress() {\n                  return onChangeImage(null);\n                }\n              }, {\n                text: \"No\"\n              }]);\n            }\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(TouchableWithoutFeedback, {\n    onPress: handlePress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, !imageUri && React.createElement(MaterialCommunityIcons, {\n    name: \"camera\",\n    size: 40,\n    color: colors.medium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), image && React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: styles.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: colors.light,\n    borderRadius: 15,\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 100,\n    width: 100\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  }\n});\nexport default ImageInput;","map":{"version":3,"sources":["/Users/katvengo/prep-cado/App/Components/ImageInput.js"],"names":["React","useState","useEffect","colors","MaterialCommunityIcons","ImagePicker","ImageInput","imageUri","onChangeImage","image","setImage","requestPermission","Platform","OS","requestMediaLibraryPermissionsAsync","status","alert","handlePress","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","console","log","cancelled","uri","Alert","text","onPress","styles","container","medium","StyleSheet","create","backgroundColor","light","borderRadius","justifyContent","alignItems","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet, Image,\n    TouchableWithoutFeedback,Platform,\n    Alert,} from 'react-native';\nimport colors from '../config/colors';\nimport {MaterialCommunityIcons} from '@expo/vector-icons'\nimport * as ImagePicker from \"expo-image-picker\";\n\nfunction ImageInput({imageUri, onChangeImage}) {\n  const [image, setImage] = useState(null)\n\n    useEffect(() => {\n        requestPermission();\n      }, []);\n    \n      const requestPermission = async () => {\n        if (Platform.OS !== 'web') {\n          const {status} = await\n          ImagePicker.requestMediaLibraryPermissionsAsync();\n          if (status !== 'granted') {\n            alert(\"You need to enable permission to access the library.\")\n          }\n        }\n        // const { granted } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        // if (!granted) alert(\"You need to enable permission to access the library.\");\n      };\n    \n      const handlePress = async () => {\n\n        let result = await ImagePicker.launchImageLibraryAsync({\n          mediaTypes: ImagePicker.MediaTypeOptions.All,\n          allowsEditing: true,\n          aspect: [4,3],\n          quality: 1,\n        });\n\n        console.log(result);\n\n        if(!result.cancelled) {\n          setImage(result.uri);\n        } else if (result.cancelled){\n          console.log(result.cancelled)\n        } else {\n           Alert.alert(\"Delete\", \"Are you sure you want to delete this image?\", [\n            { text: \"Yes\", onPress: () => onChangeImage(null) },\n            { text: \"No\" },\n          ]);\n        }\n         \n      };\n\n      // const selectImage = async () => {\n      //   try {\n      //     const result = await ImagePicker.requestMediaLibraryPermissionsAsync({\n      //       mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      //       quality: 0.5,\n      //     });\n      //     console.log(result)\n      //     if (!result.cancelled) onChangeImage(result.uri);\n      //   } catch (error) {\n      //     console.log(\"Error reading an image\", error);\n      //   }\n      // };\n\n  return (\n    <TouchableWithoutFeedback onPress={handlePress}>\n    <View style={styles.container}>\n      {!imageUri && (\n      <MaterialCommunityIcons \n      name=\"camera\" \n      size={40}\n      color={colors.medium}\n      />\n      )}\n{image && <Image source={{uri: image}} style={styles.image} /> }\n  </View>       \n   </TouchableWithoutFeedback>\n\n  )\n  \n}\n\nconst styles = StyleSheet.create({\n  container: {\n      backgroundColor: colors.light,\n      borderRadius: 15,\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: 100,\n      width: 100\n  }, \n  image: {\n      width: '100%',\n      height: '100%'\n  }\n});\n\nexport default ImageInput;"]},"metadata":{},"sourceType":"module"}